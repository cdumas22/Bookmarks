define(["backbone","Tag/Models/Tag","radio","underscore"],function(e,t,n,r){return e.Collection.extend({model:t,url:"/tags",initialize:function(){n("tags:create").subscribe([this.serverCreate,this])},serverCreate:function(e){this.add(e)},comparator:function(e){var t=e.get("title");return t=t.split(" ")[0].toLowerCase(),t},tags:function(){var e=[];this.each(function(t){var n=t.get("tags"),r;for(r=0;r<n.length;r++)$.inArray(n[r],e)<0&&e.push(n[r])});for(i=0;i<e.length;i++)e[i]=e[i].toLowerCase();return e=r.uniq(e),e},search:function(e){if(e=="")return this;var t=e.split("::"),n=[],i=[],s=[];filter=!1,t.length==2&&(e=t[1],filter=t[0]),e=e.replace(/\s\bor\b\s/gi,"|").replace(/^\s*|\s*$/g,"");var o=new RegExp(e,"gi");return s=this.filter(function(e){return(filter==="title"||!filter)&&o.test(e.get("title"))||(filter==="description"||!filter)&&o.test(e.get("description"))||(filter==="url"||!filter)&&o.test(e.get("url"))||(filter==="tags"||!filter)&&o.test(e.get("tags"))}),r(s)}})});